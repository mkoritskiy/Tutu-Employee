# OAuth —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –∫–æ–º–∞–Ω–¥—ã

## üéØ –î–ª—è –∫–æ–≥–æ —ç—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è?

- **Product Manager** - —á—Ç–æ —ç—Ç–æ –¥–∞—ë—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫** - –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
- **QA Engineer** - –∫–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- **DevOps** - —á—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å

---

## üë§ –î–ª—è Product Manager

### –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ?

**OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä** - —ç—Ç–æ –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–í–æ–π—Ç–∏" –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏,
–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä —Å —Ñ–æ—Ä–º–æ–π –≤—Ö–æ–¥–∞ Keycloak, –∏ –ø–æ—Å–ª–µ –≤–≤–æ–¥–∞ –ª–æ–≥–∏–Ω–∞/–ø–∞—Ä–æ–ª—è –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º.

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** üîê
    - –ü–∞—Ä–æ–ª—å –≤–≤–æ–¥–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ Keycloak
    - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤–∏–¥–∏—Ç –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    - –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

2. **–£–¥–æ–±—Å—Ç–≤–æ** ‚ö°
    - **Single Sign-On (SSO)** - –µ—Å–ª–∏ —É–∂–µ –≤–æ—à–µ–ª –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –≤—Ö–æ–¥ –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π
    - –ù–µ –Ω—É–∂–Ω–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –≤–≤–æ–¥–∏—Ç—å –ø–∞—Ä–æ–ª—å
    - –ü—Ä–∏–≤—ã—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Keycloak

3. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** üöÄ
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (2FA)
    - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã –≤—Ö–æ–¥–∞ (Google, Facebook –∏ —Ç.–¥.)
    - –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º

### User Flow

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   ‚Üì
2. –ù–∞–∂–∏–º–∞–µ—Ç "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä"
   ‚Üì
3. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è Chrome —Å Keycloak
   ‚Üì
4. –í–≤–æ–¥–∏—Ç –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å (–∏–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Ö–æ–¥–∏—Ç –µ—Å–ª–∏ —É–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω)
   ‚Üì
5. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   ‚Üì
6. ‚úÖ –ì–æ—Ç–æ–≤–æ! –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
```

**–í—Ä–µ–º—è –≤—Ö–æ–¥–∞:**

- –ü–µ—Ä–≤—ã–π —Ä–∞–∑: ~10-15 —Å–µ–∫—É–Ω–¥ (–≤–≤–æ–¥ –ª–æ–≥–∏–Ω–∞/–ø–∞—Ä–æ–ª—è)
- –ü–æ–≤—Ç–æ—Ä–Ω–æ (SSO): ~2-3 —Å–µ–∫—É–Ω–¥—ã (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥)

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

- **Conversion rate** - % –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∑–∞–≤–µ—Ä—à–∏–≤—à–∏—Ö OAuth flow
- **Time to login** - —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ –¥–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **SSO usage** - % –≤—Ö–æ–¥–æ–≤ —á–µ—Ä–µ–∑ SSO (–±–µ–∑ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è)
- **Error rate** - % –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞

---

## üë®‚Äçüíª –î–ª—è –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

#### 1. –ü—Ä–æ—Å—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```kotlin
@Composable
fun LoginScreen() {
    val viewModel: AuthViewModel = koinViewModel()
    
    Button(onClick = { viewModel.startKeycloakOAuth() }) {
        Text("–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä")
    }
}
```

**–í–æ—Ç –∏ –≤—Å—ë!** –û—Å—Ç–∞–ª—å–Ω–æ–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

#### 2. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏?

```kotlin
// 1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è URL —Å PKCE –∑–∞—â–∏—Ç–æ–π
viewModel.startKeycloakOAuth()
  ‚Üí KeycloakOAuthHandler.createAuthorizationUrl()
  ‚Üí openUrlInBrowser(url)

// 2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä (Chrome Custom Tab –Ω–∞ Android)
// 3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ª–æ–≥–∏–Ω–∏—Ç—Å—è –≤ Keycloak
// 4. Keycloak —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç: tutuemployee://oauth/callback?code=...

// 5. MainActivity –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç Deep Link
MainActivity.handleIntent()
  ‚Üí oauthCallback?.invoke(url)
  ‚Üí viewModel.handleKeycloakCallback(url)

// 6. –û–±–º–µ–Ω code –Ω–∞ tokens
KeycloakOAuthHandler.handleAuthorizationCallback()
  ‚Üí KeycloakClient.exchangeCodeForToken()
  ‚Üí KeycloakClient.getUserInfo()

// 7. User –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω!
uiState.isAuthenticated = true
```

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   Presentation                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ
‚îÇ  ‚îÇ AuthScreen ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí‚îÇ AuthViewModel‚îÇ             ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ
‚îÇ         ‚Üì                      ‚Üì                     ‚îÇ
‚îÇ   openUrlInBrowser()    startKeycloakOAuth()        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      Domain                          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ  ‚îÇ GetKeycloakAuthUrlUseCase             ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ HandleKeycloakCallbackUseCase         ‚îÇ          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       Data                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ
‚îÇ  ‚îÇAuthRepository‚îÇ‚îÄ‚îÄ‚îÄ‚Üí‚îÇKeycloakOAuthHandler          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ
‚îÇ                             ‚Üì                        ‚îÇ
‚îÇ                      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                ‚îÇ
‚îÇ                      ‚îÇKeycloakClient‚îÇ                ‚îÇ
‚îÇ                      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄÔøΩÔøΩÔøΩ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã

**Presentation:**

- `AuthScreen.kt` - UI —Å –∫–Ω–æ–ø–∫–æ–π OAuth
- `AuthViewModel.kt` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- `BrowserHelper.kt` - expect/actual –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞

**Domain:**

- `GetKeycloakAuthUrlUseCase.kt` - –ø–æ–ª—É—á–µ–Ω–∏–µ URL
- `HandleKeycloakCallbackUseCase.kt` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ callback

**Data:**

- `KeycloakOAuthHandler.kt` - OAuth flow —Å PKCE
- `KeycloakClient.kt` - HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ Keycloak
- `AuthRepositoryImpl.kt` - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

**Platform-specific (Android):**

- `BrowserHelper.android.kt` - Chrome Custom Tabs
- `AndroidOAuthHelper.kt` - Deep Link handling
- `MainActivity.kt` - –ø–µ—Ä–µ—Ö–≤–∞—Ç Deep Links
- `AndroidManifest.xml` - Intent Filter

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```kotlin
// composeApp/src/commonMain/.../KeycloakConfig.kt
KeycloakConfig(
    serverUrl = "https://keycloak.tutu.ru",
    realm = "tutu",
    clientId = "dom-confluence",
    redirectUri = "tutuemployee://oauth/callback"
)
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π

```kotlin
val uiState by viewModel.uiState.collectAsState()

when {
    uiState.isLoading -> {
        // –ü–æ–∫–∞–∑–∞—Ç—å loading
        CircularProgressIndicator()
    }
    
    uiState.error != null -> {
        // –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É
        Text(uiState.error)
    }
    
    uiState.isAuthenticated -> {
        // –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
        navigateToHome()
    }
}
```

### –û—Ç–ª–∞–¥–∫–∞

```bash
# –õ–æ–≥–∏ Android
adb logcat | grep -E "Keycloak|OAuth|tutuemployee"

# –¢–µ—Å—Ç Deep Link
adb shell am start -W -a android.intent.action.VIEW \
  -d "tutuemployee://oauth/callback?code=test&state=abc"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Intent Filter
adb shell dumpsys package r | grep tutuemployee
```

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **OAUTH_BROWSER_GUIDE.md** - –ø–æ–ª–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- **OAUTH_QUICK_START.md** - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- **OAUTH_EXAMPLE.md** - –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

## üß™ –î–ª—è QA Engineer

### –¢–µ—Å—Ç-–∫–µ–π—Å—ã

#### TC-001: –£—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (Happy Path)

**Preconditions:**

- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- Keycloak —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –≤–∞–ª–∏–¥–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**Steps:**

1. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ù–∞–∂–∞—Ç—å "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä"
3. –î–æ–∂–¥–∞—Ç—å—Å—è –æ—Ç–∫—Ä—ã—Ç–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ —Å Keycloak
4. –í–≤–µ—Å—Ç–∏ –≤–∞–ª–∏–¥–Ω—ã–π –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å
5. –ù–∞–∂–∞—Ç—å "Sign In"

**Expected result:**

- –ë—Ä–∞—É–∑–µ—Ä –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω —Å –∏–º–µ–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**Time:** ~10-15 —Å–µ–∫—É–Ω–¥

---

#### TC-002: SSO (Single Sign-On)

**Preconditions:**

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –≤ Keycloak –≤ –±—Ä–∞—É–∑–µ—Ä–µ

**Steps:**

1. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ù–∞–∂–∞—Ç—å "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä"
3. –î–æ–∂–¥–∞—Ç—å—Å—è –æ—Ç–∫—Ä—ã—Ç–∏—è –±—Ä–∞—É–∑–µ—Ä–∞

**Expected result:**

- –ë—Ä–∞—É–∑–µ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏ —Å—Ä–∞–∑—É –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è (–±–µ–∑ —Ñ–æ—Ä–º—ã –ª–æ–≥–∏–Ω–∞)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
- –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω

**Time:** ~2-3 —Å–µ–∫—É–Ω–¥—ã

---

#### TC-003: –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å

**Steps:**

1. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ù–∞–∂–∞—Ç—å "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä"
3. –í–≤–µ—Å—Ç–∏ –≤–∞–ª–∏–¥–Ω—ã–π –ª–æ–≥–∏–Ω
4. –í–≤–µ—Å—Ç–∏ **–Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π** –ø–∞—Ä–æ–ª—å
5. –ù–∞–∂–∞—Ç—å "Sign In"

**Expected result:**

- Keycloak –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É "Invalid username or password"
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ —Ñ–æ—Ä–º–µ –ª–æ–≥–∏–Ω–∞
- –ú–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É

---

#### TC-004: –û—Ç–º–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**Steps:**

1. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ù–∞–∂–∞—Ç—å "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä"
3. –î–æ–∂–¥–∞—Ç—å—Å—è –æ—Ç–∫—Ä—ã—Ç–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
4. –ù–∞–∂–∞—Ç—å "Back" –∏–ª–∏ –∑–∞–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä

**Expected result:**

- –í–æ–∑–≤—Ä–∞—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
- –ú–æ–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É –≤—Ö–æ–¥–∞

---

#### TC-005: –ù–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

**Preconditions:**

- –û—Ç–∫–ª—é—á–∏—Ç—å Wi-Fi –∏ –º–æ–±–∏–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç

**Steps:**

1. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ù–∞–∂–∞—Ç—å "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä"

**Expected result:**

- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ —Å–µ—Ç–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
- –ï—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–≤—Ç–æ—Ä–∏—Ç—å

---

#### TC-006: Keycloak –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**Preconditions:**

- Keycloak —Å–µ—Ä–≤–µ—Ä –≤—ã–∫–ª—é—á–µ–Ω –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**Steps:**

1. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ù–∞–∂–∞—Ç—å "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä"

**Expected result:**

- –ë—Ä–∞—É–∑–µ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å

---

### –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫ (Checklist)

**UI/UX:**

- [ ] –ö–Ω–æ–ø–∫–∞ "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä" –≤–∏–¥–Ω–∞ –∏ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞
- [ ] Loading indicator –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –æ–ø–µ—Ä–∞—Ü–∏–∏
- [ ] –û—à–∏–±–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–æ–Ω—è—Ç–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º
- [ ] –ü–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏ –ø–ª–∞–≤–Ω—ã–π

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**

- [ ] –ë—Ä–∞—É–∑–µ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (Chrome Custom Tab –Ω–∞ Android)
- [ ] Deep Link —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- [ ] –¢–æ–∫–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] User info –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**

- [ ] –ü–∞—Ä–æ–ª—å –Ω–µ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è
- [ ] –¢–æ–∫–µ–Ω—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ UI
- [ ] Deep Link —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º scheme

**Edge Cases:**

- [ ] –†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –ø–ª–æ—Ö–æ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ
- [ ] –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å–ª–µ –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- [ ] –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- [ ] –†–∞–±–æ—Ç–∞–µ—Ç —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (–±—É–¥—É—â–µ–µ)

```kotlin
// –ü—Ä–∏–º–µ—Ä UI —Ç–µ—Å—Ç–∞
@Test
fun testOAuthLogin() {
    // 1. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É
    onNodeWithText("–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä").performClick()
    
    // 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –±—Ä–∞—É–∑–µ—Ä –æ—Ç–∫—Ä—ã–ª—Å—è
    // (—Ç—Ä–µ–±—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
    
    // 3. –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å callback
    sendDeepLink("tutuemployee://oauth/callback?code=test&state=abc")
    
    // 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
    onNodeWithText("–ì–ª–∞–≤–Ω–∞—è").assertExists()
}
```

---

## üîß –î–ª—è DevOps

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Keycloak

#### 1. –°–æ–∑–¥–∞–Ω–∏–µ/–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Client

**Keycloak Admin Console:**

```
Realm: tutu
Clients ‚Üí dom-confluence ‚Üí Settings
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

```yaml
Client ID: dom-confluence
Client Protocol: openid-connect
Access Type: public
Standard Flow Enabled: ON
Direct Access Grants Enabled: ON (optional)

Valid Redirect URIs:
  - tutuemployee://oauth/callback
  - tutuemployee://oauth/callback/*

Web Origins:
  - +

Root URL: (–ø—É—Å—Ç–æ)
Base URL: (–ø—É—Å—Ç–æ)
Admin URL: (–ø—É—Å—Ç–æ)
```

#### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫

```bash
# –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é OpenID Connect
curl https://keycloak.tutu.ru/realms/tutu/.well-known/openid-configuration

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å availability
curl -I https://keycloak.tutu.ru/realms/tutu/protocol/openid-connect/auth
```

#### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

**–ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:**

```
- keycloak.login.success (counter)
- keycloak.login.failed (counter)
- keycloak.login.duration (histogram)
- keycloak.token.issued (counter)
```

**–õ–æ–≥–∏:**

```bash
# Keycloak logs
tail -f /var/log/keycloak/server.log | grep "dom-confluence"
```

#### 4. Troubleshooting

**–ü—Ä–æ–±–ª–µ–º–∞: Invalid redirect_uri**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞
curl -X GET \
  https://keycloak.tutu.ru/admin/realms/tutu/clients \
  -H "Authorization: Bearer $ADMIN_TOKEN"
```

**–†–µ—à–µ–Ω–∏–µ:**

- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Valid Redirect URIs –≤ Keycloak
- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å **—Ç–æ—á–Ω–æ**: `tutuemployee://oauth/callback`
- Case-sensitive!

**–ü—Ä–æ–±–ª–µ–º–∞: Client not found**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
curl https://keycloak.tutu.ru/realms/tutu/clients-registrations/openid-connect/dom-confluence
```

**–†–µ—à–µ–Ω–∏–µ:**

- –°–æ–∑–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å realm name

### Environment Variables

```bash
# Production
KEYCLOAK_SERVER_URL=https://keycloak.tutu.ru
KEYCLOAK_REALM=tutu
KEYCLOAK_CLIENT_ID=dom-confluence

# Staging
KEYCLOAK_SERVER_URL=https://keycloak-staging.tutu.ru
KEYCLOAK_REALM=tutu-staging
KEYCLOAK_CLIENT_ID=dom-confluence-staging

# Development
KEYCLOAK_SERVER_URL=http://localhost:8080
KEYCLOAK_REALM=tutu-dev
KEYCLOAK_CLIENT_ID=dom-confluence-dev
```

### CI/CD

```yaml
# .github/workflows/deploy.yml
- name: Build Android Release
  env:
    KEYCLOAK_SERVER_URL: ${{ secrets.KEYCLOAK_SERVER_URL }}
    KEYCLOAK_REALM: ${{ secrets.KEYCLOAK_REALM }}
    KEYCLOAK_CLIENT_ID: ${{ secrets.KEYCLOAK_CLIENT_ID }}
  run: ./gradlew :composeApp:assembleRelease
```

### Security

**Checklist:**

- [ ] HTTPS only –¥–ª—è production Keycloak
- [ ] Valid Redirect URIs —Å—Ç—Ä–æ–≥–æ –∑–∞–¥–∞–Ω—ã (no wildcards)
- [ ] Client Authentication: OFF (public client)
- [ ] Regular rotation of client secrets (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)
- [ ] Rate limiting –Ω–∞ Keycloak endpoints
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏

- **Success Rate:** > 95% —É—Å–ø–µ—à–Ω—ã—Ö OAuth flows
- **Response Time:** < 5 —Å–µ–∫—É–Ω–¥ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ flow
- **Error Rate:** < 5% –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
- **SSO Usage:** > 50% –≤—Ö–æ–¥–æ–≤ —á–µ—Ä–µ–∑ SSO

### –ë–∏–∑–Ω–µ—Å –º–µ—Ç—Ä–∏–∫–∏

- **User Adoption:** % –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö OAuth –≤—Ö–æ–¥
- **Time to First Action:** –≤—Ä–µ–º—è –æ—Ç –≤—Ö–æ–¥–∞ –¥–æ –ø–µ—Ä–≤–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
- **Session Duration:** –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ—Å—Å–∏–∏
- **Return Rate:** % –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏—Ö—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ 7 –¥–Ω–µ–π

---

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –ü–æ—á–µ–º—É –±—Ä–∞—É–∑–µ—Ä –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è?**
A: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Chrome —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ Android. Fallback - —Å–∏—Å—Ç–µ–º–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä.

**Q: –ü–æ—á–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞?**
A: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Deep Link –≤ AndroidManifest –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ Keycloak.

**Q: –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ offline?**
A: –ù–µ—Ç, —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–ª—è ÔøΩÔøΩ–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏. –ù–æ —Ç–æ–∫–µ–Ω—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è.

**Q: –ë–µ–∑–æ–ø–∞—Å–Ω–æ –ª–∏ —ç—Ç–æ?**
A: –î–∞! –≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π OAuth 2.0 flow —Å PKCE –∑–∞—â–∏—Ç–æ–π, —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

### –ö–æ–Ω—Ç–∞–∫—Ç—ã

- **Tech Lead:** [–ò–º—è]
- **Backend:** [–ò–º—è]
- **QA Lead:** [–ò–º—è]
- **DevOps:** [–ò–º—è]

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [OAUTH_BROWSER_GUIDE.md](OAUTH_BROWSER_GUIDE.md) - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [OAUTH_QUICK_START.md](OAUTH_QUICK_START.md) - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- [OAUTH_EXAMPLE.md](OAUTH_EXAMPLE.md) - –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞
- [Keycloak Documentation](https://www.keycloak.org/docs/)
- [OAuth 2.0 RFC 8252](https://tools.ietf.org/html/rfc8252)

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0  
**–î–∞—Ç–∞:** –î–µ–∫–∞–±—Ä—å 2024  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready (Android)
